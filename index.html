<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Expo 2025 Countdown</title>
<style>
  @import url('https://fonts.googleapis.com/css2?family=Orbitron&family=Roboto&display=swap');

  * {
    margin: 0; padding: 0; box-sizing: border-box;
  }

  body {
    background: linear-gradient(135deg, #0f2027, #203a43, #2c5364);
    font-family: 'Roboto', sans-serif;
    color: #e0f7fa;
    min-height: 100vh;
    display: flex;
    align-items: center;
    justify-content: center;
    padding: 1rem;
  }

  .container {
    background: rgba(255, 255, 255, 0.07);
    border-radius: 24px;
    padding: 3rem 3rem 4rem;
    max-width: 440px;
    width: 100%;
    box-shadow: 0 0 20px rgba(0, 229, 255, 0.5);
    text-align: center;
    position: relative;
  }

  h1 {
    font-family: 'Orbitron', sans-serif;
    font-size: 2.8rem;
    color: #00e5ff;
    text-shadow:
      0 0 8px #00e5ff,
      0 0 20px #00e5ff;
    margin-bottom: 0.3rem;
  }

  h2 {
    font-family: 'Orbitron', sans-serif;
    font-size: 1.1rem;
    color: #80deea;
    letter-spacing: 0.15em;
    margin-bottom: 2rem;
  }

  #dayDisplay {
    font-size: 2.5rem;
    font-weight: 700;
    color: #00fff7;
    text-shadow:
      0 0 5px #00fff7,
      0 0 15px #00fff7;
    margin-bottom: 1.2rem;
  }

  #hourDisplay, #remainDisplay {
    font-size: 1.2rem;
    font-weight: 500;
    color: #80deea;
    margin-bottom: 1rem;
    letter-spacing: 0.05em;
  }

  #remainDisplay {
    margin-bottom: 3rem;
  }

  #dateTimeDisplay {
    font-size: 1rem;
    font-weight: 400;
    color: #b2ebf2;
    margin-bottom: 1.5rem;
    user-select: none;
  }

  .footer {
    font-size: 0.9rem;
    color: #4dd0e1;
    letter-spacing: 0.1em;
    user-select: none;
  }

  /* 言語切替ボタン群 */
  .lang-buttons {
    display: flex;
    justify-content: center;
    flex-wrap: wrap;
    gap: 8px;
    margin-bottom: 2rem;
  }

  .lang-buttons button {
    background: rgba(0, 229, 255, 0.15);
    border: none;
    border-radius: 20px;
    color: #00e5ff;
    font-weight: 700;
    padding: 8px 14px;
    cursor: pointer;
    font-size: 0.9rem;
    transition: background 0.3s, color 0.3s;
    user-select: none;
  }

  .lang-buttons button:hover,
  .lang-buttons button.active {
    background: #00e5ff;
    color: #00333f;
  }

  /* 日本語ボタン特別強調（絵文字なし） */
  .lang-buttons button[data-lang="jp"] {
    font-weight: 900;
    color: #ff3b3b;
  }
  .lang-buttons button[data-lang="jp"].active {
    background: #ff3b3b;
    color: #fff;
  }
</style>
</head>
<body>
  <div class="container" role="main" aria-label="Expo 2025 Countdown">
    <div class="lang-buttons" aria-label="Language selection">
      <button data-lang="jp" class="active" aria-pressed="true">日本語</button>
      <button data-lang="en" aria-pressed="false">English</button>
      <button data-lang="zh-CN" aria-pressed="false">中文（简体）</button>
      <button data-lang="zh-TW" aria-pressed="false">中文（繁體）</button>
      <button data-lang="ko" aria-pressed="false">한국어</button>
      <button data-lang="es" aria-pressed="false">Español</button>
      <button data-lang="fr" aria-pressed="false">Français</button>
      <button data-lang="de" aria-pressed="false">Deutsch</button>
      <button data-lang="pt" aria-pressed="false">Português</button>
    </div>

    <h1 id="title">2025 日本万博カウントダウン</h1>
    <h2 id="subtitle"><span id="dayDisplay">-</span></h2>

    <div id="hourDisplay">経過時間: - 時間</div>
    <div id="remainDisplay">再開まで: - 時間</div>

    <div id="dateTimeDisplay" aria-live="polite" aria-atomic="true">日時表示: -</div>

    <div class="footer" id="footerText">日時は日本時間（JST）基準で表示しています。</div>
  </div>

<script>
  // 開催期間（UTC）
  const startDate = new Date(Date.UTC(2025, 3, 13, 1, 0, 0)); // 4/13 10:00 JST = UTC 1:00
  const endDate = new Date(Date.UTC(2025, 9, 13, 9, 0, 0));   // 10/13 18:00 JST = UTC 9:00

  const texts = {
    jp: {
      title: "2025 日本万博カウントダウン",
      dayLabel: "第{day}日目",
      hourElapsed: "経過時間: {hour}時間",
      remain: "再開まで: {hour}時間",
      footer: "日時は日本時間（JST）基準で表示しています。",
      dateTimeLabel: "日時表示: {dateTime}",
    },
    en: {
      title: "Expo 2025 Countdown",
      dayLabel: "Day {day}",
      hourElapsed: "Hours elapsed: {hour}",
      remain: "Until reopening: {hour}",
      footer: "All times are shown in Japan Standard Time (JST).",
      dateTimeLabel: "Current date and time: {dateTime}",
    },
    "zh-CN": {
      title: "2025年世博会倒计时",
      dayLabel: "第{day}天",
      hourElapsed: "已过时间: {hour}小时",
      remain: "距离重新开放: {hour}小时",
      footer: "时间均以日本标准时间（JST）显示。",
      dateTimeLabel: "当前日期和时间: {dateTime}",
    },
    "zh-TW": {
      title: "2025年世博會倒數計時",
      dayLabel: "第{day}天",
      hourElapsed: "已過時間: {hour}小時",
      remain: "距離重新開放: {hour}小時",
      footer: "時間均以日本標準時間（JST）顯示。",
      dateTimeLabel: "當前日期和時間: {dateTime}",
    },
    ko: {
      title: "2025 엑스포 카운트다운",
      dayLabel: "{day}일째",
      hourElapsed: "경과 시간: {hour}시간",
      remain: "재개까지: {hour}시간",
      footer: "모든 시간은 일본 표준시(JST)를 기준으로 표시됩니다.",
      dateTimeLabel: "현재 날짜 및 시간: {dateTime}",
    },
    es: {
      title: "Cuenta regresiva Expo 2025",
      dayLabel: "Día {day}",
      hourElapsed: "Horas transcurridas: {hour}",
      remain: "Hasta la reapertura: {hour}",
      footer: "Todos los horarios se muestran en la hora estándar de Japón (JST).",
      dateTimeLabel: "Fecha y hora actuales: {dateTime}",
    },
    fr: {
      title: "Compte à rebours Expo 2025",
      dayLabel: "Jour {day}",
      hourElapsed: "Heures écoulées : {hour}",
      remain: "Jusqu'à la réouverture : {hour}",
      footer: "Tous les horaires sont affichés en heure normale du Japon (JST).",
      dateTimeLabel: "Date et heure actuelles : {dateTime}",
    },
    de: {
      title: "Expo 2025 Countdown",
      dayLabel: "Tag {day}",
      hourElapsed: "Verstrichene Stunden: {hour}",
      remain: "Bis zur Wiedereröffnung: {hour}",
      footer: "Alle Zeiten werden in Japanischer Standardzeit (JST) angezeigt.",
      dateTimeLabel: "Aktuelles Datum und Uhrzeit: {dateTime}",
    },
    pt: {
      title: "Contagem regressiva Expo 2025",
      dayLabel: "Dia {day}",
      hourElapsed: "Horas decorridas: {hour}",
      remain: "Até a reabertura: {hour}",
      footer: "Todos os horários são exibidos no Horário Padrão do Japão (JST).",
      dateTimeLabel: "Data e hora atuais: {dateTime}",
    }
  };

  let currentLang = "jp";

  const titleEl = document.getElementById("title");
  const subtitleEl = document.getElementById("subtitle");
  const dayDisplayEl = document.getElementById("dayDisplay");
  const hourDisplayEl = document.getElementById("hourDisplay");
  const remainDisplayEl = document.getElementById("remainDisplay");
  const footerEl = document.getElementById("footerText");
  const dateTimeDisplayEl = document.getElementById("dateTimeDisplay");

  const langButtons = document.querySelectorAll(".lang-buttons button");

  // ページ読み込み時に保存済み言語を取得して適用
  window.addEventListener('DOMContentLoaded', () => {
    const savedLang = localStorage.getItem('expoLang');
    if (savedLang && texts[savedLang]) {
      currentLang = savedLang;
    }
    updateLangButtons();
    updateCountdown();
    setInterval(updateCountdown, 1000);
  });

  // 言語切替ボタン処理で言語設定をlocalStorageに保存
  langButtons.forEach(button => {
    button.addEventListener('click', () => {
      const selectedLang = button.getAttribute('data-lang');
      if (selectedLang !== currentLang && texts[selectedLang]) {
        currentLang = selectedLang;
        localStorage.setItem('expoLang', currentLang);  // 保存
        updateLangButtons();
        updateCountdown();
      }
    });
  });

  // 言語ボタンの活性表示を更新する関数
  function updateLangButtons() {
    langButtons.forEach(btn => {
      if (btn.getAttribute('data-lang') === currentLang) {
        btn.classList.add('active');
        btn.setAttribute('aria-pressed', 'true');
      } else {
        btn.classList.remove('active');
        btn.setAttribute('aria-pressed', 'false');
      }
    });
  }

  // JST 現在日時取得
  function getJSTDate() {
    const now = new Date();
    return new Date(now.getTime() + 9 * 60 * 60 * 1000);
  }

  // 言語ごとに適切な日時フォーマットで表示
  function formatDateByLang(date, lang) {
    const localeMap = {
      jp: "ja-JP",
      en: "en-US",
      "zh-CN": "zh-CN",
      "zh-TW": "zh-TW",
      ko: "ko-KR",
      es: "es-ES",
      fr: "fr-FR",
      de: "de-DE",
      pt: "pt-PT",
    };

    const locale = localeMap[lang] || "en-US";

    return new Intl.DateTimeFormat(locale, {
      year: "numeric",
      month: "long",
      day: "numeric",
      hour: "2-digit",
      minute: "2-digit",
      second: "2-digit",
      hour12: lang === "en", // 英語のみ12時間制
      timeZone: "Asia/Tokyo",
    }).format(date);
  }

  // テンプレート文字列埋め込み
  function formatText(template, data) {
    return template.replace(/{(\w+)}/g, (_, key) => data[key] ?? "");
  }

  // 時間を「0時間」形式にフォーマット（負は0に）
  function formatHour(h) {
    return h < 0 ? 0 : h;
  }

  // カウントダウン更新
  function updateCountdown() {
    const nowJST = getJSTDate();

    const elapsedMs = nowJST - startDate;
    const elapsedHours = elapsedMs > 0 ? Math.floor(elapsedMs / (1000 * 60 * 60)) : 0;
    const elapsedDays = elapsedMs >= 0 ? Math.floor(elapsedMs / (1000 * 60 * 60 * 24)) + 1 : 0;

    const remainMs = endDate - nowJST;
    const remainHours = remainMs > 0 ? Math.ceil(remainMs / (1000 * 60 * 60)) : 0;

    dayDisplayEl.textContent = formatText(texts[currentLang].dayLabel, { day: elapsedDays });
    hourDisplayEl.textContent = formatText(texts[currentLang].hourElapsed, { hour: formatHour(elapsedHours) });

    if (nowJST < startDate) {
      // 開催前は開始までの時間を表示
      const untilStartHours = Math.ceil((startDate - nowJST) / (1000 * 60 * 60));
      remainDisplayEl.textContent = formatText(texts[currentLang].remain, { hour: untilStartHours });
    } else if (nowJST > endDate) {
      remainDisplayEl.textContent = formatText(texts[currentLang].remain, { hour: 0 });
    } else {
      remainDisplayEl.textContent = formatText(texts[currentLang].remain, { hour: formatHour(remainHours) });
    }

    titleEl.textContent = texts[currentLang].title;
    footerEl.textContent = texts[currentLang].footer;

    const formattedDateTime = formatDateByLang(nowJST, currentLang);
    dateTimeDisplayEl.textContent = formatText(texts[currentLang].dateTimeLabel, { dateTime: formattedDateTime });
  }
</script>
</body>
</html>
